<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="847px" preserveAspectRatio="none" style="width:892px;height:847px;background:#FFFFFF;" version="1.1" viewBox="0 0 892 847" width="892px" zoomAndPan="magnify"><title>External / Third-Party Order Ingestion (Concept)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="381.3564" x="251.5144" y="27.9951">External / Third-Party Order Ingestion (Concept)</text><g><title>External Platform</title><rect fill="#000000" fill-opacity="0.00000" height="705.7188" width="8" x="69.0347" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="73" x2="73" y1="89.8906" y2="795.6094"/></g><g><title>Integration Adapter</title><rect fill="#000000" fill-opacity="0.00000" height="705.7188" width="8" x="318.0718" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="321.0747" x2="321.0747" y1="89.8906" y2="795.6094"/></g><g><title>Tenant App</title><rect fill="#000000" fill-opacity="0.00000" height="705.7188" width="8" x="539.6172" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="542.752" x2="542.752" y1="89.8906" y2="795.6094"/></g><g><title>Analytics . Loyalty</title><rect fill="#000000" fill-opacity="0.00000" height="705.7188" width="8" x="772.5884" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="775.7915" x2="775.7915" y1="89.8906" y2="795.6094"/></g><g class="participant participant-head" data-participant="Ext"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.0693" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.0693" x="12" y="62.292">External Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.2139" x="24.4277" y="78.5889">(Marketplace)</text></g><g class="participant participant-tail" data-participant="Ext"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.0693" x="5" y="794.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.0693" x="12" y="814.6045">External Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.2139" x="24.4277" y="830.9014">(Marketplace)</text></g><g class="participant participant-head" data-participant="Adapter"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.9941" x="240.0747" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.3818" x="253.3809" y="62.292">Integration Adapter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.9941" x="247.0747" y="78.5889">(Channel Integration)</text></g><g class="participant participant-tail" data-participant="Adapter"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.9941" x="240.0747" y="794.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.3818" x="253.3809" y="814.6045">Integration Adapter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.9941" x="247.0747" y="830.9014">(Channel Integration)</text></g><g class="participant participant-head" data-participant="TenantApp"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.7305" x="481.752" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7803" x="503.2271" y="62.292">Tenant App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.7305" x="488.752" y="78.5889">(Order Domain)</text></g><g class="participant participant-tail" data-participant="TenantApp"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.7305" x="481.752" y="794.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7803" x="503.2271" y="814.6045">Tenant App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.7305" x="488.752" y="830.9014">(Order Domain)</text></g><g class="participant participant-head" data-participant="Analyt"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207.5938" x="672.7915" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.2852" x="709.4458" y="62.292">Analytics &amp; Loyalty</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193.5938" x="679.7915" y="78.5889">(Analytics/Loyalty Services)</text></g><g class="participant participant-tail" data-participant="Analyt"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207.5938" x="672.7915" y="794.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.2852" x="709.4458" y="814.6045">Analytics &amp; Loyalty</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193.5938" x="679.7915" y="830.9014">(Analytics/Loyalty Services)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="885.3853" x="0" y="120.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="885.3853" y1="120.457" y2="120.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="885.3853" y1="123.457" y2="123.457"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="279.3955" x="302.9949" y="109.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="260.8696" x="308.9949" y="125.9575">Order Created on External Platform</text><g class="message" data-participant-1="Ext" data-participant-2="Adapter"><polygon fill="#181818" points="310.0718,205.5547,320.0718,209.5547,310.0718,213.5547,314.0718,209.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="73.0347" x2="316.0718" y1="209.5547" y2="209.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.9995" x="80.0347" y="159.0903">Order payload</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.9097" x="80.0347" y="174.2231">(external_order_id,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.9541" x="80.0347" y="189.356">items, customer, amounts,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.9229" x="80.0347" y="204.4888">shipping, payment_status)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="885.3853" x="0" y="238.1211"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="885.3853" y1="238.1211" y2="238.1211"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="885.3853" y1="241.1211" y2="241.1211"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="143.7651" x="370.8101" y="227.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="125.2393" x="376.8101" y="243.6216">Normalize &amp; Map</text><g class="message" data-participant-1="Adapter" data-participant-2="Adapter"><line style="stroke:#181818;stroke-width:1;" x1="322.0718" x2="364.0718" y1="312.0859" y2="312.0859"/><line style="stroke:#181818;stroke-width:1;" x1="364.0718" x2="364.0718" y1="312.0859" y2="325.0859"/><line style="stroke:#181818;stroke-width:1;" x1="323.0718" x2="364.0718" y1="325.0859" y2="325.0859"/><polygon fill="#181818" points="333.0718,321.0859,323.0718,325.0859,333.0718,329.0859,329.0718,325.0859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.5259" x="329.0718" y="276.7544">Normalize payload</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.6689" x="329.0718" y="291.8872">(map products, prices,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.7026" x="329.0718" y="307.02">customer data)</text></g><g class="message" data-participant-1="Adapter" data-participant-2="TenantApp"><polygon fill="#181818" points="531.6172,395.6172,541.6172,399.6172,531.6172,403.6172,535.6172,399.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="322.0718" x2="537.6172" y1="399.6172" y2="399.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.1704" x="329.0718" y="349.1528">Import order</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.6943" x="329.0718" y="364.2856">(normalized order,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.6484" x="329.0718" y="379.4185">source=EXTERNAL,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.5454" x="329.0718" y="394.5513">source_ref=external_order_id)</text></g><g class="message" data-participant-1="TenantApp" data-participant-2="TenantApp"><line style="stroke:#181818;stroke-width:1;" x1="543.6172" x2="585.6172" y1="459.0156" y2="459.0156"/><line style="stroke:#181818;stroke-width:1;" x1="585.6172" x2="585.6172" y1="459.0156" y2="472.0156"/><line style="stroke:#181818;stroke-width:1;" x1="544.6172" x2="585.6172" y1="472.0156" y2="472.0156"/><polygon fill="#181818" points="554.6172,468.0156,544.6172,472.0156,554.6172,476.0156,550.6172,472.0156" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.7476" x="550.6172" y="423.6841">Create internal order</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.7056" x="550.6172" y="438.8169">(channel=EXTERNAL,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.6733" x="550.6172" y="453.9497">source_reference set)</text></g><g class="message" data-participant-1="TenantApp" data-participant-2="TenantApp"><line style="stroke:#181818;stroke-width:1;" x1="543.6172" x2="585.6172" y1="516.2813" y2="516.2813"/><line style="stroke:#181818;stroke-width:1;" x1="585.6172" x2="585.6172" y1="516.2813" y2="529.2813"/><line style="stroke:#181818;stroke-width:1;" x1="544.6172" x2="585.6172" y1="529.2813" y2="529.2813"/><polygon fill="#181818" points="554.6172,525.2813,544.6172,529.2813,554.6172,533.2813,550.6172,529.2813" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.1304" x="550.6172" y="496.0825">Match or create customer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.5596" x="550.6172" y="511.2153">within tenant context</text></g><g class="message" data-participant-1="TenantApp" data-participant-2="TenantApp"><line style="stroke:#181818;stroke-width:1;" x1="543.6172" x2="585.6172" y1="573.5469" y2="573.5469"/><line style="stroke:#181818;stroke-width:1;" x1="585.6172" x2="585.6172" y1="573.5469" y2="586.5469"/><line style="stroke:#181818;stroke-width:1;" x1="544.6172" x2="585.6172" y1="586.5469" y2="586.5469"/><polygon fill="#181818" points="554.6172,582.5469,544.6172,586.5469,554.6172,590.5469,550.6172,586.5469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.0254" x="550.6172" y="553.3481">Reserve/update inventory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.6089" x="550.6172" y="568.481">as needed</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="885.3853" x="0" y="615.1133"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="885.3853" y1="615.1133" y2="615.1133"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="885.3853" y1="618.1133" y2="618.1133"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="136.2178" x="374.5837" y="604.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117.6919" x="380.5837" y="620.6138">Post-Processing</text><g class="message" data-participant-1="TenantApp" data-participant-2="Analyt"><polygon fill="#181818" points="764.5884,685.0781,774.5884,689.0781,764.5884,693.0781,768.5884,689.0781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="543.6172" x2="770.5884" y1="689.0781" y2="689.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.3687" x="550.6172" y="653.7466">Emit order + channel event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.9712" x="550.6172" y="668.8794">(tenant_id, channel=EXTERNAL,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.4766" x="550.6172" y="684.0122">source_ref,...)</text></g><g class="message" data-participant-1="TenantApp" data-participant-2="Analyt"><polygon fill="#181818" points="764.5884,729.3438,774.5884,733.3438,764.5884,737.3438,768.5884,733.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="543.6172" x2="770.5884" y1="733.3438" y2="733.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.0601" x="550.6172" y="713.145">Emit loyalty accrual event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.5415" x="550.6172" y="728.2778">(if loyalty enabled)</text></g><g class="message" data-participant-1="Adapter" data-participant-2="Ext"><polygon fill="#181818" points="84.0347,773.6094,74.0347,777.6094,84.0347,781.6094,80.0347,777.6094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="78.0347" x2="321.0718" y1="777.6094" y2="777.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.561" x="90.0347" y="757.4106">Acknowledge import</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225.0371" x="90.0347" y="772.5435">(status, internal_order_id optional)</text></g><!--SRC=[VLDDRnen4BtpAqOvL45Tu5vrAo7A0IcaAENGGoGqjGUmicjRzcnI-kixNkyka3Gv0JD-7pFpOCCLmV8FKx1OmGosHnFqP8E1J_0ZQ0gmiWUAR9o5suMpYZoFHoCl3umo7Yt3pG3VLCXx5-f7Uxl6y4JiArGqlW6CIUCQjR9CXu0jyroZ5mx1BOveBLLmqStuxiarnvPi-fnxBz1izxkhqNIOt9RkDMekNa_oCy8dk7CdhFWayA4wwshmayApKHGx0sr_D2hBRZ6BGCYaGVo_sG2KvKYACFdM6uSl7SpZgNAeHP4wrCwbnixeuj4QfZeMe9h8hgPG0DQkiHob5O_6UsCFHQAeoV8kCd8JnwsdUr75olmb6MgDFXdebQzCdD-TZTJotWUd6oL2yYqDBOAz2T38EBwa6nOhXAlQky3GpY1SjkVNkPICkoOeAfU_jik7-_dTKDa5sfTlbY3ZdEbVQUMLWx7TkdjHbLFpVmaA9B65I1BSTvdNoEeeVA2oH3_xetqnV3GME4TDET6MABzBz41HOaEpnkjizLakvO8aJ39aYJJfzbuR5tco2KvM7UMewLvNd3bkGhYiJRTT-0pTe429LGRFhb9quCCT5DFfTFoHGDLb7fKA3Pu5p7ve2VXtHUa-ATbV9vEBLCtLatKlqZt8o6qW19lZMGpd6auCpgS_DbRZVm00]--></g></svg>