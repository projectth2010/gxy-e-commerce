<?php

return [
    /*
    |--------------------------------------------------------------------------
    | Stripe Webhook Configuration
    |--------------------------------------------------------------------------
    |
    | This file is for storing the configuration for Stripe webhooks.
    |
    */

    /*
    |--------------------------------------------------------------------------
    | Webhook Secret
    |--------------------------------------------------------------------------
    |
    | This is the webhook secret used to verify the webhook signature.
    |
    */
    'webhook_secret' => env('STRIPE_WEBHOOK_SECRET'),

    /*
    |--------------------------------------------------------------------------
    | Stripe IP Addresses
    |--------------------------------------------------------------------------
    |
    | List of Stripe's webhook IP addresses.
    | These should be updated periodically from: https://stripe.com/docs/ips
    |
    */
    'webhook_ips' => [
        '13.32.0.0/15',
        '13.35.0.0/16',
        '18.164.0.0/16',
        '18.175.0.0/16',
        '35.154.0.0/16',
        '52.12.0.0/15',
        '52.24.0.0/14',
        '52.32.0.0/14',
        '52.52.0.0/16',
        '52.56.0.0/16',
        '52.57.0.0/16',
        '52.58.0.0/15',
        '52.60.0.0/16',
        '52.64.0.0/13',
        '52.76.0.0/17',
        '52.77.0.0/16',
        '52.84.0.0/15',
        '52.200.0.0/13',
        '54.144.0.0/12',
        '54.192.0.0/16',
        '54.193.0.0/17',
        '54.208.0.0/15',
        '54.210.0.0/17',
        '54.226.0.0/16',
        '54.228.0.0/16',
        '54.229.0.0/16',
        '54.230.0.0/17',
        '54.234.0.0/16',
        '54.236.0.0/15',
        '54.240.0.0/12',
        '99.79.0.0/16',
        '108.128.0.0/13',
        '108.138.0.0/15',
        '108.156.0.0/14',
        '108.170.192.0/20',
        '108.170.208.0/20',
        '108.170.224.0/19',
        '108.171.160.0/20',
        '130.211.0.0/16',
        '136.144.0.0/12',
        '140.82.0.0/15',
        '142.250.0.0/15',
        '143.204.0.0/16',
        '144.2.0.0/16',
        '144.24.0.0/16',
        '144.220.0.0/16',
        '150.222.0.0/16',
        // Add more IP ranges as needed
    ],

    /*
    |--------------------------------------------------------------------------
    | Webhook Rate Limiting
    |--------------------------------------------------------------------------
    |
    | Configure the rate limiting for webhook requests.
    |
    */
    'rate_limiting' => [
        'enabled' => true,
        'max_attempts' => 100, // Max requests per minute
        'decay_minutes' => 1,  // Time window in minutes
    ],

    /*
    |--------------------------------------------------------------------------
    | Logging Configuration
    |--------------------------------------------------------------------------
    |
    | Configure logging for webhook events.
    |
    */
    'logging' => [
        'enabled' => true,
        'channel' => env('STRIPE_WEBHOOK_LOG_CHANNEL', 'stack'),
    ],
];
